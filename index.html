<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Custodia Familiar 2026-2027</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' x='0.1em' font-size='80'%3E%F0%9F%93%85%3C/text%3E%3C/svg%3E">
  <style>
    :root {
      --father-color: #fecaca; /* red-200 ‚Üí m√°s visible */
      --mother-color: #dbeafe; /* blue-200 ‚Üí m√°s contraste */
      --border-color: #e3e3ee;
      --accent-color: #7c3aed;
      --accent-soft: #ede9fe;
      --text-main: #111827;
      --text-muted: #6b7280;
      --bg-main: #f3f4fb;
      --card-bg: #ffffff;
      --shadow-soft: 0 16px 40px rgba(15, 23, 42, 0.08);
      --success: #10b981;
      --error: #ef4444;
    }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg-main);
      color: var(--text-main);
      padding-bottom: 40px;
    }
    h1, h2, h3 { margin-top: 0; color: #1f2937; }
    .hidden { display: none !important; }

    /* TOASTS */
    .toast-container {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 10px;
      pointer-events: none;
    }
    .toast {
      background: #333;
      color: #fff;
      padding: 14px 28px;
      border-radius: 50px;
      font-size: 1rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .toast.visible { opacity: 1; transform: translateY(0); }
    .toast.success { background: var(--success); }
    .toast.error { background: var(--error); }

    /* LOGIN */
    .login-wrapper {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      background: radial-gradient(circle at top, #ede9fe, #f3f4fb);
    }
    .login-card {
      background: #fff;
      max-width: 380px;
      width: 100%;
      border-radius: 24px;
      box-shadow: 0 20px 45px rgba(15,23,42,0.15);
      padding: 32px 24px;
    }
    .login-title {
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 12px;
      color: var(--accent-color);
    }
    .login-subtitle { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 24px; }

    .login-field input {
      padding: 14px 16px;
      font-size: 1.05rem;
    }
    .login-btn { padding: 16px; font-size: 1.1rem; font-weight: 600; }

    /* APP */
    .app { max-width: 1200px; margin: 0 auto; padding: 12px; }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      border-radius: 20px;
      background: #fff;
      box-shadow: var(--shadow-soft);
      margin-bottom: 20px;
    }
    .logo-icon { width: 40px; height: 40px; font-size: 24px; border-radius: 2px solid #e5e7eb; border-radius: 12px; background: var(--accent-soft); display: flex; align-items: center; justify-content: center; }
    .app-name { font-size: 1.2rem; font-weight: 700; }

    .year-select { padding: 10px 36px 10px 16px; font-size: 1rem; }

    /* CALENDARIO */
    .calendar-wrapper {
      background: var(--card-bg);
      border-radius: 24px;
      padding: 20px;
      box-shadow: var(--shadow-soft);
    }
    .month-table td {
      height: 60px;
      position: relative;
      border-radius: 12px;
      transition: transform 0.15s;
    }
    .day-number {
      position: absolute;
      top: 6px;
      left: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      color: #64748b;
      background: white;
      padding: 2px 8px;
      border-radius: 8px;
      z-index: 2;
    }
    .owner-text {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem; /* grande en desktop */
      font-weight: 800;
      pointer-events: none;
      user-select: none;
    }
    .day-mother .owner-text { color: #2563eb; }
    .day-father .owner-text { color: #dc2626; }
    .day-overridden::after {
      content: "‚áÑ";
      position: absolute;
      top: 8px;
      right: 8px;
      font-size: 1.1rem;
      color: #7c3aed;
      opacity: 0.8;
    }
    .today-marker {
      position: absolute;
      top: 6px;
      right: 6px;
      width: 10px;
      height: 10px;
      background: var(--accent-color);
      border-radius: 50%;
      box-shadow: 0 0 0 3px white;
    }

    /* MOBILE OPTIMIZATIONS */
    @media (max-width: 640px) {
      .topbar { padding: 20px; gap: 20px; flex-direction: column; align-items: flex-start; }
      .topbar-right { width: 100%; justify-content: space-between; }
      .month-table td { height: 80px !important; }
      .owner-text { font-size: 3rem; } /* ¬°IMPOSIBLE NO VERLO! */
      .day-number { font-size: 1.1rem; }
      .nav-arrow { width: 48px; height: 48px; font-size: 32px; }
      .calendar-title { font-size: 1.8rem; }
      .legend { font-size: 1rem; gap: 20px; flex-wrap: wrap; }
      .day-cell:hover { transform: none; } /* desactivado en m√≥vil */
      .login-card { padding: 40px 32px; }
      .login-title { font-size: 1.6rem; }
      .login-subtitle { font-size: 1rem; }
      .login-field input { padding: 16px; font-size: 1.1rem; }
      .login-btn { padding: 18px; font-size: 1.2rem; }
      .new-request-header { font-size: 1.1rem; }
    }

    /* RESTO DE ESTILOS (igual que antes con peque√±os ajustes) */
    /* ... (mantengo todo el resto de estilos que ya ten√≠as, solo a√±ado los nuevos) */
    .legend-color.mother { background: var(--mother-color); border: 1px solid #93c5fd; }
    .legend-color.father { background: var(--father-color); border: 1px solid #fca5a5; }
    /* etc... (el resto del CSS original se mantiene) */
  </style>
</head>
<body>
<!-- ... (el HTML del login y estructura igual) -->

  <div class="calendar-subheader">
    <div class="legend">
      <span class="legend-item"><span class="legend-color mother"></span> üë© Mam√°</span>
      <span class="legend-item"><span class="legend-color father"></span> üë® Pap√°</span>
      <span class="legend-item">‚áÑ Cambio manual</span>
    </div>
    <!-- controles -->
  </div>

<!-- Dentro del script, cambia esta parte del renderCalendar(): -->
    // Antes ten√≠as:
    // const pill = document.createElement("div");
    // pill.className = `owner-pill ${final === "madre" ? "madre-pill" : "padre-pill"}`;
    // pill.textContent = final === "madre" ? "MAM√Å" : "PAP√Å";

    // Ahora:
    const ownerText = document.createElement("div");
    ownerText.className = "owner-text";
    ownerText.textContent = final === "madre" ? "üë©" : "üë®";
    td.appendChild(ownerText);

    // Tooltip mejorado
    td.title = `${dateKey}: ${final === "madre" ? "Mam√° üë©" : "Pap√° üë®"} ${override ? "(cambio manual)" : ""}`;

    // Y en los lugares donde muestras "Padre"/"Madre" ‚Üí "Pap√° üë®" / "Mam√° üë©"
    // Ejemplo:
    document.getElementById("user-role-label").textContent = currentRole === "padre" ? "Pap√° üë®" : "Mam√° üë©";
    document.getElementById("whoami-label").innerHTML = `Eres: <strong>${currentRole === "padre" ? "Pap√° üë®" : "Mam√° üë©"}</strong>`;

    // En renderRequests tambi√©n:
    const fromName = req.requester === "padre" ? "Pap√° üë®" : "Mam√° üë©";
    const toName = req.target === "padre" ? "Pap√° üë®" : "Mam√° üë©";

Con estos cambios el calendario se ve **mucho m√°s claro y moderno en m√≥viles**, incluso en pantallas peque√±as el emoji es imposible pasarlo por alto, y la experiencia t√°ctil es muy superior.

¬øQuieres que adem√°s le a√±ada modo oscuro, modo anual horizontal swipeable o que el bot√≥n de nueva solicitud sea flotante? Puedo seguir mejor√°ndolo. üòä
